import tkinter as tk
from tkinter import messagebox
import requests
import json

class WeatherApp:
    def __init__(self, root):
        self.root = root
        self.root.title("–ü–æ–≥–æ–¥–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")
        self.root.geometry("400x500")
        
        self.api_key = "your_api_key_here"  # –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ openweathermap.org
        self.last_city = ""
        
        self.create_widgets()
    
    def create_widgets(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"""
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫
        title_label = tk.Label(self.root, text="–ü–æ–≥–æ–¥–∞", 
                              font=("Arial", 20, "bold"))
        title_label.pack(pady=20)
        
        # –ü–æ–ª–µ –≤–≤–æ–¥–∞ –≥–æ—Ä–æ–¥–∞
        input_frame = tk.Frame(self.root)
        input_frame.pack(pady=10)
        
        tk.Label(input_frame, text="–ì–æ—Ä–æ–¥:", font=("Arial", 12)).pack(side=tk.LEFT)
        self.city_var = tk.StringVar()
        self.city_entry = tk.Entry(input_frame, textvariable=self.city_var, 
                                  font=("Arial", 12), width=20)
        self.city_entry.pack(side=tk.LEFT, padx=10)
        self.city_entry.bind("<Return>", lambda e: self.get_weather())
        
        # –ö–Ω–æ–ø–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã
        self.get_weather_btn = tk.Button(self.root, text="–ü–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É", 
                                        command=self.get_weather, font=("Arial", 12),
                                        bg="lightblue")
        self.get_weather_btn.pack(pady=10)
        
        # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
        separator = tk.Frame(self.root, height=2, bg="gray")
        separator.pack(fill=tk.X, padx=20, pady=20)
        
        # –û–±–ª–∞—Å—Ç—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã
        self.weather_frame = tk.Frame(self.root)
        self.weather_frame.pack(fill=tk.BOTH, expand=True, padx=20)
        
        # –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        self.hide_weather_data()
    
    def hide_weather_data(self):
        """–°–∫—Ä—ã—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ"""
        for widget in self.weather_frame.winfo_children():
            widget.destroy()
        
        message_label = tk.Label(self.weather_frame, text="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã",
                                font=("Arial", 12), fg="gray")
        message_label.pack(pady=50)
    
    def show_weather_data(self, weather_data):
        """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ"""
        for widget in self.weather_frame.winfo_children():
            widget.destroy()
        
        # –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
        city_label = tk.Label(self.weather_frame, text=weather_data["city"], 
                             font=("Arial", 18, "bold"))
        city_label.pack(pady=10)
        
        # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
        temp_label = tk.Label(self.weather_frame, 
                             text=f"{weather_data['temperature']}¬∞C",
                             font=("Arial", 32, "bold"))
        temp_label.pack(pady=10)
        
        # –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã
        desc_label = tk.Label(self.weather_frame, 
                             text=weather_data["description"].title(),
                             font=("Arial", 14))
        desc_label.pack(pady=5)
        
        # –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        details_frame = tk.Frame(self.weather_frame)
        details_frame.pack(pady=20)
        
        # –í–ª–∞–∂–Ω–æ—Å—Ç—å
        humidity_frame = tk.Frame(details_frame)
        humidity_frame.pack(pady=5)
        tk.Label(humidity_frame, text="–í–ª–∞–∂–Ω–æ—Å—Ç—å:", font=("Arial", 10)).pack(side=tk.LEFT)
        tk.Label(humidity_frame, text=f"{weather_data['humidity']}%", 
                font=("Arial", 10, "bold")).pack(side=tk.LEFT, padx=5)
        
        # –î–∞–≤–ª–µ–Ω–∏–µ
        pressure_frame = tk.Frame(details_frame)
        pressure_frame.pack(pady=5)
        tk.Label(pressure_frame, text="–î–∞–≤–ª–µ–Ω–∏–µ:", font=("Arial", 10)).pack(side=tk.LEFT)
        tk.Label(pressure_frame, text=f"{weather_data['pressure']} hPa", 
                font=("Arial", 10, "bold")).pack(side=tk.LEFT, padx=5)
        
        # –í–µ—Ç–µ—Ä
        wind_frame = tk.Frame(details_frame)
        wind_frame.pack(pady=5)
        tk.Label(wind_frame, text="–í–µ—Ç–µ—Ä:", font=("Arial", 10)).pack(side=tk.LEFT)
        tk.Label(wind_frame, text=f"{weather_data['wind_speed']} –º/—Å", 
                font=("Arial", 10, "bold")).pack(side=tk.LEFT, padx=5)
        
        # –ò–∫–æ–Ω–∫–∞ –ø–æ–≥–æ–¥—ã (—ç–º–æ–¥–∑–∏)
        weather_icon = self.get_weather_icon(weather_data["description"])
        icon_label = tk.Label(self.weather_frame, text=weather_icon, 
                             font=("Arial", 48))
        icon_label.pack(pady=10)
    
    def get_weather_icon(self, description):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏ –¥–ª—è –ø–æ–≥–æ–¥—ã"""
        description = description.lower()
        if "rain" in description:
            return "üåßÔ∏è"
        elif "cloud" in description:
            return "‚òÅÔ∏è"
        elif "sun" in description or "clear" in description:
            return "‚òÄÔ∏è"
        elif "snow" in description:
            return "‚ùÑÔ∏è"
        elif "storm" in description:
            return "‚õàÔ∏è"
        elif "fog" in description or "mist" in description:
            return "üå´Ô∏è"
        else:
            return "üåà"
    
    def get_weather(self):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ —Å API"""
        city = self.city_var.get().strip()
        if not city:
            messagebox.showerror("–û—à–∏–±–∫–∞", "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞")
            return
        
        try:
            # –≠–º—É–ª—è—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á)
            weather_data = self.mock_weather_api(city)
            
            if weather_data:
                self.show_weather_data(weather_data)
                self.last_city = city
            else:
                messagebox.showerror("–û—à–∏–±–∫–∞", "–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω")
                
        except Exception as e:
            messagebox.showerror("–û—à–∏–±–∫–∞", f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ: {str(e)}")
    
    def mock_weather_api(self, city):
        """
        –≠–º—É–ª—è—Ü–∏—è API –ø–æ–≥–æ–¥—ã
        –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ OpenWeatherMap API
        """
        # –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        mock_data = {
            "–º–æ—Å–∫–≤–∞": {
                "city": "–ú–æ—Å–∫–≤–∞",
                "temperature": 15,
                "description": "–æ–±–ª–∞—á–Ω–æ",
                "humidity": 65,
                "pressure": 1013,
                "wind_speed": 3.5
            },
            "—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥": {
                "city": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", 
                "temperature": 12,
                "description": "–Ω–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å",
                "humidity": 80,
                "pressure": 1005,
                "wind_speed": 4.2
            },
            "—Å–æ—á–∏": {
                "city": "–°–æ—á–∏",
                "temperature": 22,
                "description": "—Å–æ–ª–Ω–µ—á–Ω–æ",
                "humidity": 55,
                "pressure": 1015,
                "wind_speed": 2.1
            }
        }
        
        return mock_data.get(city.lower())

# –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–¥:
"""
def real_weather_api(self, city):
    # –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ OpenWeatherMap API
    url = f"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={self.api_key}&units=metric&lang=ru"
    
    response = requests.get(url)
    if response.status_code == 200:
        data = response.json()
        return {
            "city": data["name"],
            "temperature": round(data["main"]["temp"]),
            "description": data["weather"][0]["description"],
            "humidity": data["main"]["humidity"],
            "pressure": data["main"]["pressure"],
            "wind_speed": data["wind"]["speed"]
        }
    else:
        return None
"""

root = tk.Tk()
app = WeatherApp(root)
root.mainloop()