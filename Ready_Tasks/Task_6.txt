import tkinter as tk
from tkinter import messagebox

def calculate_bmi():
    """Расчет индекса массы тела"""
    try:
        height = float(height_entry.get()) / 100  # переводим в метры
        weight = float(weight_entry.get())
        
        if height <= 0 or weight <= 0:
            messagebox.showerror("Ошибка", "Рост и вес должны быть положительными числами")
            return
            
        bmi = weight / (height ** 2)
        
        # Определяем категорию
        if bmi < 18.5:
            category = "Недостаточный вес"
            color = "blue"
        elif bmi < 25:
            category = "Нормальный вес"
            color = "green"
        elif bmi < 30:
            category = "Избыточный вес"
            color = "orange"
        else:
            category = "Ожирение"
            color = "red"
            
        result_label.config(text=f"ИМТ: {bmi:.1f}\n{category}", fg=color)
        
    except ValueError:
        messagebox.showerror("Ошибка", "Введите корректные числа")

def validate_numeric_input(char):
    """Валидация ввода - только числа и точка"""
    return char.isdigit() or char == '.'

root = tk.Tk()
root.title("Калькулятор ИМТ")
root.geometry("300x300")

# Регистрируем функцию валидации
vcmd = root.register(validate_numeric_input)

# Поле для роста
tk.Label(root, text="Рост (см):", font=("Arial", 12)).pack(pady=10)
height_entry = tk.Entry(root, font=("Arial", 12), validate="key", 
                       validatecommand=(vcmd, '%S'))
height_entry.pack(pady=5)

# Поле для веса
tk.Label(root, text="Вес (кг):", font=("Arial", 12)).pack(pady=10)
weight_entry = tk.Entry(root, font=("Arial", 12), validate="key", 
                       validatecommand=(vcmd, '%S'))
weight_entry.pack(pady=5)

# Кнопка расчета
calculate_button = tk.Button(root, text="Рассчитать ИМТ", 
                           command=calculate_bmi, font=("Arial", 12),
                           bg="lightgreen")
calculate_button.pack(pady=20)

# Метка для результата
result_label = tk.Label(root, text="Введите данные", font=("Arial", 14, "bold"))
result_label.pack(pady=10)

root.mainloop()