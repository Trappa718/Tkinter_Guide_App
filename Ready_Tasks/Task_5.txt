import tkinter as tk
from tkinter import filedialog, messagebox

def new_file():
    """Создание нового файла"""
    if text_area.get(1.0, tk.END).strip():
        if messagebox.askyesno("Сохранить", "Сохранить текущий файл?"):
            save_file()
    text_area.delete(1.0, tk.END)
    update_status()

def open_file():
    """Открытие файла"""
    file_path = filedialog.askopenfilename(
        filetypes=[("Text files", "*.txt"), ("All files", "*.*")]
    )
    if file_path:
        with open(file_path, 'r', encoding='utf-8') as file:
            text_area.delete(1.0, tk.END)
            text_area.insert(1.0, file.read())
        update_status()

def save_file():
    """Сохранение файла"""
    file_path = filedialog.asksaveasfilename(
        defaultextension=".txt",
        filetypes=[("Text files", "*.txt"), ("All files", "*.*")]
    )
    if file_path:
        with open(file_path, 'w', encoding='utf-8') as file:
            file.write(text_area.get(1.0, tk.END))
        update_status()

def update_status():
    """Обновление статусной строки"""
    text_content = text_area.get(1.0, tk.END)
    char_count = len(text_content) - 1  # -1 для учета конечного символа
    status_var.set(f"Символов: {char_count}")

root = tk.Tk()
root.title("Простой текстовый редактор")
root.geometry("600x400")

# Создаем меню
menu_bar = tk.Menu(root)

file_menu = tk.Menu(menu_bar, tearoff=0)
file_menu.add_command(label="Новый", command=new_file)
file_menu.add_command(label="Открыть", command=open_file)
file_menu.add_command(label="Сохранить", command=save_file)
file_menu.add_separator()
file_menu.add_command(label="Выход", command=root.quit)

menu_bar.add_cascade(label="Файл", menu=file_menu)
root.config(menu=menu_bar)

# Текстовое поле
text_frame = tk.Frame(root)
text_frame.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)

text_area = tk.Text(text_frame, wrap=tk.WORD, font=("Arial", 12))
text_area.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)

# Полоса прокрутки
scrollbar = tk.Scrollbar(text_frame, command=text_area.yview)
scrollbar.pack(side=tk.RIGHT, fill=tk.Y)
text_area.config(yscrollcommand=scrollbar.set)

# Статусная строка
status_var = tk.StringVar()
status_var.set("Символов: 0")
status_bar = tk.Label(root, textvariable=status_var, bd=1, relief=tk.SUNKEN, anchor=tk.W)
status_bar.pack(side=tk.BOTTOM, fill=tk.X)

# Обновление статуса при изменении текста
text_area.bind("<KeyRelease>", lambda e: update_status())

root.mainloop()